.PHONY: all clean

CC=clang
APP=build/app
XCRUN=xcrun -sdk macosx
ENTRY_POINT=src/main.c

INC=-Isrc/foundation -Isrc/public
LIBS=-framework Metal -framework Cocoa

all: collect
	$(CC) $(CCFLAGS) $(INC) ${LIBS} -o $(APP) $(ENTRY_POINT) $(SOURCE_FILES)

run: all
	$(APP)

build/base.metallib: resource/shader/metal/base.metal
	$(XCRUN) metal -c $^ -o build/base.air
	$(XCRUN) metallib build/base.air -o $@

