.PHONY: all clean

CC=clang
APP=build/app
XCRUN=xcrun -sdk macosx
ENTRY_POINT=src/main.c

INC=-I/usr/local/include \
	-Isrc/public \
	-Isrc/foundation \
	-Isrc/foundation/osx

LIBS = `pkg-config --cflags --libs glfw3` -L/usr/local/lib -lm
LIBS += -framework AppKit -framework Metal -framework QuartzCore

all: collect
	$(CC) $(CCFLAGS) $(INC) -o $(APP) $(ENTRY_POINT) $(SOURCE_FILES) $(LIBS)

run: all
	$(APP)

build/base.metallib: resource/shader/metal/base.metal
	$(XCRUN) metal -c $^ -o build/base.air
	$(XCRUN) metallib build/base.air -o $@

